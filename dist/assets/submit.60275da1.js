var $=Object.defineProperty,B=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var S=(n,e,a)=>e in n?$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,w=(n,e)=>{for(var a in e||(e={}))V.call(e,a)&&S(n,a,e[a]);if(y)for(var a of y(e))A.call(e,a)&&S(n,a,e[a]);return n},M=(n,e)=>B(n,U(e));import{e as C,m as E,h as G,f as R,r as l,g as T,o as p,c as f,a as t,w as x,v as F,n as H,F as N,p as O,t as q,G as P,u as j,k as W}from"./app.7d93a73b.js";const L=t("h1",{class:"text-center"}," Upload your Mehm ",-1),Y=t("p",{class:"mb-12 text-center"}," Make sure it's original and you are allowed to post it! ",-1),J={class:"flex flex-col my-4"},K=t("label",{for:"title",class:"font-medium py-1 required"},"Title",-1),Q={class:"flex flex-col my-4"},X=t("label",{for:"description",class:"font-medium py-1 required"},"Description",-1),Z={class:"flex flex-col my-4"},ee=t("label",{for:"image",class:"font-medium py-1 required"},"Image",-1),te={class:"flex flex-col my-4"},oe=t("label",{for:"category",class:"font-medium py-1 required"},"Category",-1),ae=["value"],se={class:"text-root-100"},ne=C({setup(n){const{t:e}=E(),a=G(),_=R(),h=`${P}/mehms/add`,b=l([{text:e("category.programming"),value:"PROGRAMMING"},{text:e("category.dhbw"),value:"DHBW"},{text:e("category.others"),value:"OTHER"}]),u=1048576,d=l(""),c=l(""),m=l(""),i=l(),g=l(),v=l(""),{execute:k}=T(h,{immediate:!1,async beforeFetch({options:s,cancel:r}){(!d.value||!c.value||!m.value||!i.value)&&r(),i.value.size>u&&(v.value=`Image is too large. File size: ${i.value.size}, Max size: ${u}`,r());const o=new FormData;o.append("title",d.value),o.append("description",c.value),o.append("image",i.value),o.append("genre",m.value),s.headers=M(w({},s.headers),{Authorization:`Bearer ${a.jwt}`}),s.body=o},afterFetch(s){return _.push(`/mehm/${s.data.mehmId}`),s},onFetchError(s){return v.value=s.data.message,s}}).post().json(),z=()=>{i.value=g.value.files[0]},D=s=>{s.preventDefault()},I=()=>{k()};return(s,r)=>(p(),f("form",{ref:"form",class:"paper max-w-2xl mx-auto p-4 lg:p-8 rounded",enctype:"multipart/form-data",onSubmit:D},[L,Y,t("div",null,[t("div",J,[K,x(t("input",{id:"title","onUpdate:modelValue":r[0]||(r[0]=o=>d.value=o),type:"text",name:"title",tabindex:"1",class:"box",required:"true"},null,512),[[F,d.value]])]),t("div",Q,[X,x(t("textarea",{id:"description","onUpdate:modelValue":r[1]||(r[1]=o=>c.value=o),name:"description",rows:"4",tabindex:"2",class:"box",required:"true"},null,512),[[F,c.value]])]),t("div",Z,[ee,t("input",{ref_key:"fileInput",ref:g,type:"file",name:"image",size:"100000",tabindex:"3",required:"true",accept:"image/*",onChange:z},null,544)]),t("div",te,[oe,x(t("select",{id:"category","onUpdate:modelValue":r[2]||(r[2]=o=>m.value=o),name:"genre",tabindex:"4",class:"box",required:"true"},[(p(!0),f(N,null,O(b.value,o=>(p(),f("option",{key:o.value,value:o.value},q(o.text),9,ae))),128))],512),[[H,m.value]])]),t("p",se,q(v.value),1),t("button",{class:"bg-void-100 text-void-900 font-bold w-full p-2 mt-4 rounded",tabindex:"5",onClick:I}," Submit ")])],544))}}),ie={setup(n,{expose:e}){return e({frontmatter:{title:"Submit",meta:[{name:"Submit",content:"Post your own Mehm"},{property:"og:title",content:"Submit"}]}}),j({title:"Submit",meta:[{name:"Submit",content:"Post your own Mehm"},{property:"og:title",content:"Submit"}]}),(h,b)=>{const u=ne;return p(),f("div",null,[W(u)])}}};export{ie as default};
