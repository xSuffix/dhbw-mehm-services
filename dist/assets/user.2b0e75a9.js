var $=Object.defineProperty,k=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var h=(n,o,s)=>o in n?$(n,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[o]=s,u=(n,o)=>{for(var s in o||(o={}))U.call(o,s)&&h(n,s,o[s]);if(f)for(var s of f(o))C.call(o,s)&&h(n,s,o[s]);return n},l=(n,o)=>k(n,F(o));import{e as D,f as N,h as A,q as B,r as j,s as I,g,o as _,c as y,a as t,x as a,t as d,G as S,u as T,k as E}from"./app.c5d36453.js";import{t as M}from"./jdenticon-module.687b0030.js";const V={class:"paper max-w-2xl mx-auto p-4 lg:p-8 rounded"},H=t("h1",{class:"text-center"}," My user profile ",-1),L=t("p",{class:"mb-12 text-center"}," Time to brush your eyes? No problem, we do forgive your sins, son. ",-1),z={class:"flex"},G={class:"flex gap-3 items-start"},J=["innerHTML"],O={class:"strong font-medium"},R={class:"flex gap-4 mt-2"},W={class:"text-root-100"},q=t("summary",{class:"select-none"}," Danger Zone ",-1),K=t("div",{class:"my-4"},[t("p",{class:"text-xl strong"}," Warning! Deleting your user account can not be revoked! "),t("p",null,"This is not hiding from FBI but vanishing completely!")],-1),P=D({setup(n){const o=`${S}/user`,s=N(),r=A(),m=M(r.name,48),p=B(()=>r.admin?"Admin":"User"),c=j("");r.jwt||s.push("/login");const{copy:v}=I(),{execute:b}=g(`${o}/logout`,{immediate:!1,async beforeFetch({options:e}){return e.headers=l(u({},e.headers),{Credentials:"include",Authorization:`Bearer ${r.jwt}`}),{options:e}},afterFetch(e){const i=JSON.parse(e.data);return typeof document!="undefined"&&(document.cookie=`${i.Name}=${i.Value}; expires=${new Date(Date.now()-60*60*1e3)}; path=/`,r.logout()),s.push("/login"),e},onFetchError(e){return c.value=e.data.response,e}}).get(),x=()=>{b()},w=()=>{g(`${o}/delete`,{async beforeFetch({options:e}){return e.headers=l(u({},e.headers),{Credentials:"include",Authorization:`Bearer ${r.jwt}`}),e.body=JSON.stringify({id:`${r.id}`}),{options:e}},afterFetch(e){return typeof document!="undefined"&&(document.cookie=`${e.data.Name}=${e.data.Value}; expires=${new Date(Date.now()-60*60*1e3)}; path=/`),s.push("/"),s.forward(),e},onFetchError(e){return c.value=e.data.response,e}}).post().json()};return(e,i)=>(_(),y("div",V,[H,L,t("div",z,[t("div",G,[t("div",{class:"bg-white rounded",innerHTML:a(m)},null,8,J),t("div",null,[t("div",O," ["+d(a(p))+"] "+d(a(r).name),1),t("div",null,d(a(r).email),1)])])]),t("div",R,[t("button",{class:"bg-void-100 text-void-900 font-bold w-full p-2 mt-4 rounded",onClick:x}," Logout "),t("button",{class:"bg-void-700 text-gray-200 font-bold w-full p-2 mt-4 rounded",onClick:i[0]||(i[0]=Y=>a(v)(a(r).jwt))}," Copy API Key ")]),t("p",W,d(c.value),1),t("details",{class:"mt-8"},[q,K,t("button",{class:"bg-root-100 text-root-900 font-bold w-full p-2 mt-4 rounded",onClick:w}," Delete ")])]))}}),ee={setup(n,{expose:o}){return o({frontmatter:{title:"User",meta:[{name:"User",content:"Info regarding your user"},{property:"og:title",content:"User"}]}}),T({title:"User",meta:[{name:"User",content:"Info regarding your user"},{property:"og:title",content:"User"}]}),(m,p)=>{const c=P;return _(),y("div",null,[E(c)])}}};export{ee as default};
