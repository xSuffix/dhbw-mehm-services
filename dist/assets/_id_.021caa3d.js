var me=Object.defineProperty,pe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var W=(n,o,a)=>o in n?me(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a,w=(n,o)=>{for(var a in o||(o={}))fe.call(o,a)&&W(n,a,o[a]);if(U)for(var a of U(o))ge.call(o,a)&&W(n,a,o[a]);return n},y=(n,o)=>pe(n,ve(o));import{o as l,c as u,a as t,_ as te,e as oe,h as se,r as B,g as k,z as V,i as $e,x as r,A as T,l as q,k as v,b as $,t as _,F as ne,p as xe,y as F,B as ae,C as be,D as we,G as re,m as ye,E as ke,f as Me,H as Ce,w as Q,I as X,J as Ae,K as Be,L as Fe,u as Se,M as ee,N as Ie}from"./app.098ec924.js";import{t as z}from"./jdenticon-module.687b0030.js";const Ze={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20"},Le=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9 2a1 1 0 0 0-.894.553L7.382 4H4a1 1 0 0 0 0 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6a1 1 0 1 0 0-2h-3.382l-.724-1.447A1 1 0 0 0 11 2H9ZM7 8a1 1 0 0 1 2 0v6a1 1 0 1 1-2 0V8Zm5-1a1 1 0 0 0-1 1v6a1 1 0 1 0 2 0V8a1 1 0 0 0-1-1Z","clip-rule":"evenodd"},null,-1),Te=[Le];function je(n,o){return l(),u("svg",Ze,Te)}var ie={name:"heroicons-solid-trash",render:je};const He={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20"},Ve=t("path",{fill:"currentColor",d:"M15 8a3 3 0 1 0-2.977-2.63l-4.94 2.47a3 3 0 1 0 0 4.319l4.94 2.47a3 3 0 1 0 .895-1.789l-4.94-2.47a3.027 3.027 0 0 0 0-.74l4.94-2.47C13.456 7.68 14.19 8 15 8Z"},null,-1),ze=[Ve];function De(n,o){return l(),u("svg",He,ze)}var Ne={name:"heroicons-solid-share",render:De};const Re={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20"},Ye=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M18 5v8a2 2 0 0 1-2 2h-5l-5 4v-4H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2ZM7 8H5v2h2V8Zm2 0h2v2H9V8Zm6 0h-2v2h2V8Z","clip-rule":"evenodd"},null,-1),Ee=[Ye];function Pe(n,o){return l(),u("svg",Re,Ee)}var le={name:"heroicons-solid-chat-alt",render:Pe};const Je={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ge=t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 0 0 0 6.364L12 20.364l7.682-7.682a4.5 4.5 0 0 0-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 0 0-6.364 0Z"},null,-1),Ke=[Ge];function Oe(n,o){return l(),u("svg",Je,Ke)}var Ue={name:"heroicons-outline-heart",render:Oe};const We={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20"},qe=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 0 1 5.656 0L10 6.343l1.172-1.171a4 4 0 1 1 5.656 5.656L10 17.657l-6.828-6.829a4 4 0 0 1 0-5.656Z","clip-rule":"evenodd"},null,-1),Qe=[qe];function Xe(n,o){return l(),u("svg",We,Qe)}var et={name:"heroicons-solid-heart",render:Xe};const tt={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20"},ot=t("path",{fill:"currentColor",d:"M13.586 3.586a2 2 0 1 1 2.828 2.828l-.793.793l-2.828-2.828l.793-.793Zm-2.207 2.207L3 14.172V17h2.828l8.38-8.379l-2.83-2.828Z"},null,-1),st=[ot];function nt(n,o){return l(),u("svg",tt,st)}var at={name:"heroicons-solid-pencil",render:nt};const rt={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20"},it=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M3 3a1 1 0 0 1 1 1v12a1 1 0 1 1-2 0V4a1 1 0 0 1 1-1Zm7.707 3.293a1 1 0 0 1 0 1.414L9.414 9H17a1 1 0 1 1 0 2H9.414l1.293 1.293a1 1 0 0 1-1.414 1.414l-3-3a1 1 0 0 1 0-1.414l3-3a1 1 0 0 1 1.414 0Z","clip-rule":"evenodd"},null,-1),lt=[it];function ct(n,o){return l(),u("svg",rt,lt)}var dt={name:"heroicons-solid-login",render:ct};const ut=n=>(be("data-v-892d44e6"),n=n(),we(),n),_t={id:"comments",class:"paper p-4 flex flex-col gap-2"},ht=$("Melde dich an, um zu kommentieren "),mt={key:1,class:"flex flex-col gap-2"},pt={class:"flex gap-1 items-center"},vt=$(" Kommentiere als "),ft={class:"flex flex-col gap-4"},gt={href:""},$t=["innerHTML"],xt={class:"flex items-center whitespace-pre"},bt={href:"",class:"strong ml-2"},wt=["title"],yt=["onClick"],kt=["onClick"],Mt=ut(()=>t("div",{class:"w-1px bg-gray-400 mx-auto"},null,-1)),Ct=["contenteditable","onInput"],At=oe({props:{id:null},setup(n){const o=n,a=se(),h=B(),M=B(0),S=32,f=`${re}/comments/`,{data:x,execute:g}=k(`${f}get/${o.id}`,{afterFetch(c){return c.data.forEach(i=>{const b=Date.parse(`${i.dateTime}Z`);i.icon=z(i.author,S),i.timeAgo=V(b).value,i.dateTime=new Date(b).toLocaleString()}),c.data.reverse(),c}}).get().json(),I=()=>{k(`${f}new`,{async beforeFetch({options:c}){var i;return c.headers=y(w({},c.headers),{Credentials:"include",Authorization:`Bearer ${a.jwt}`}),c.body=JSON.stringify({mehmId:o.id,comment:(i=h.value)==null?void 0:i.value}),{options:c}},afterFetch(c){return g(),h.value&&(h.value.value=""),c}}).post()},A=c=>{k(`${f}remove?commentId=${c}`,{async beforeFetch({options:i}){return i.headers=y(w({},i.headers),{Credentials:"include",Authorization:`Bearer ${a.jwt}`}),{options:i}},afterFetch(i){return g(),i}}).post()},d=c=>{M.value=c},Z=(c,i)=>{const b=c.target.innerText;k(`${f}update`,{async beforeFetch({options:p}){return p.headers=y(w({},p.headers),{Credentials:"include",Authorization:`Bearer ${a.jwt}`}),p.body=JSON.stringify({id:i,text:b}),{options:p}},afterFetch(p){return g(),p}}).post()};return(c,i)=>{const b=dt,p=$e("router-link"),j=le,L=ie,e=at;return l(),u("div",_t,[r(a).jwt?(l(),u("div",mt,[t("p",pt,[v(j),vt,v(p,{to:"/user",class:"strong"},{default:q(()=>[$(_(r(a).name),1)]),_:1})]),t("textarea",{id:"comment",ref_key:"commentArea",ref:h,name:"comment",rows:"6",class:"box"},null,512),t("button",{class:"ml-auto bg-void-100 text-void-900 font-medium px-2 py-1 rounded mt-2",onClick:I}," Kommentieren ")])):(l(),T(p,{key:0,to:"/login",class:"strong flex gap-1 items-center"},{default:q(()=>[v(b),ht]),_:1})),t("div",ft,[(l(!0),u(ne,null,xe(r(x),s=>(l(),u("div",{key:s.id,class:"grid grid-cols-[36px,1fr] gap-2 my-2"},[t("a",gt,[t("div",{class:"bg-white rounded-1/2 p-2px",innerHTML:s.icon},null,8,$t)]),t("div",xt,[t("a",bt,_(s.author),1),t("span",{title:s.dateTime,class:"text-gray-400"}," \xB7 "+_(s.timeAgo),9,wt),s.author===r(a).name||r(a).admin?(l(),u("button",{key:0,class:"ml-2",onClick:m=>A(s.id)},[v(L)],8,yt)):F("",!0),s.author===r(a).name||r(a).admin?(l(),u("button",{key:1,class:"ml-2",onClick:m=>d(s.id)},[v(e)],8,kt)):F("",!0)]),Mt,t("p",{class:ae(["whitespace-pre-line rounded p-2 max-w-full",{editable:M.value===s.id}]),contenteditable:M.value===s.id,onInput:m=>Z(m,s.id),onBlur:i[0]||(i[0]=m=>d(-1))},_(s.comment.replace(/<br>/g,`
`).replace(/<br>/g,"<br>")),43,Ct)]))),128))])])}}});var Bt=te(At,[["__scopeId","data-v-892d44e6"]]);const Ft={class:"flex flex-col flex-grow flex-shrink basis-7/12 gap-2"},St={class:"flex justify-center"},It=["src","alt"],Zt={class:"lg:sticky paper top-16 flex-shrink basis-5/12 p-4 transition-top duration-200"},Lt={class:"flex gap-2 items-start"},Tt=["innerHTML"],jt={class:"text-sm"},Ht={class:"strong"},Vt={class:"strong"},zt=$(),Dt=["title"],Nt=["contenteditable"],Rt=["contenteditable"],Yt={class:"flex flex-wrap gap-x-4 -ml-2"},Et={href:"#comments",class:"icon-btn"},Pt=oe({props:{id:null,showFooter:{type:Boolean}},setup(n){const o=n,{t:a}=ye(),h=se(),M=ke(),S=Me(),f=40,x=`${re}/mehms/`,g=B(!1),I=B(!1),A=B(h.admin),{data:d,isFetching:Z}=k(`${x}${o.id}`,{async beforeFetch({options:e}){return e.headers=y(w({},e.headers),{Credentials:"include",Authorization:`Bearer ${h.jwt}`}),{options:e}},timeout:1e3,afterFetch(e){const s=Date.parse(`${e.data.createdDate}Z`);return e.data.icon=z(e.data.authorName,f),e.data.timeAgo=V(s).value,e.data.createdDate=new Date(s).toLocaleString(),g.value=e.data.liked,A.value=e.data.authorName===h.name,e},onFetchError(e){return e.data===null&&(e.data=Ce.find(s=>s.id===o.id),e.data.icon=z(e.data.authorName,f),e.data.timeAgo=V(Date.parse(`${e.data.createdDate}Z`)).value),e}}).get().json(),c=()=>{const{onFetchResponse:e}=k(`${x+o.id}/like`,{async beforeFetch({url:s,options:m,cancel:C}){return m.headers=y(w({},m.headers),{Credentials:"include",Authorization:`Bearer ${h.jwt}`}),{options:m}}}).post();e(s=>{s.status===200&&(g.value=!g.value,g.value?d.value.likes++:d.value.likes--)})},{share:i,isSupported:b}=Be(),p=()=>{var e,s;I.value=!0,i({title:(e=d.value)==null?void 0:e.title,text:(s=d.value)==null?void 0:s.description,url:location.href.split("#")[0]})},j=()=>{k(`${x}${o.id}/remove?id=${o.id}&userId=${h.id}`,{async beforeFetch({options:e}){return e.headers=y(w({},e.headers),{Credentials:"include",Authorization:`Bearer ${h.jwt}`}),{options:e}},afterFetch(e){return M.resetState(),M.fetchMehms(),S.push("/"),e}}).post()},L=(e,s)=>{const m={};m[s]=e.target.innerText,k(`${x}${o.id}/update`,{async beforeFetch({options:C}){return C.headers=y(w({},C.headers),{Credentials:"include",Authorization:`Bearer ${h.jwt}`}),C.body=JSON.stringify(m),{options:C}}}).post()};return(e,s)=>{var D,N,R,Y,E,P,J,G,K,O;const m=Bt,C=et,ce=Ue,de=le,ue=Ne,_e=ie,he=Fe;return l(),u(ne,null,[Q(t("div",Ae(e.$attrs,{class:"flex flex-col-reverse lg:flex-row lg:items-start gap-2"}),[t("div",Ft,[t("div",St,[t("img",{src:(D=r(d))==null?void 0:D.imageSource,alt:(N=r(d))==null?void 0:N.title,class:"paper w-full max-h-3xl select-none object-contain"},null,8,It)]),v(m,{id:n.id},null,8,["id"])]),t("aside",Zt,[t("div",Lt,[t("div",{class:"bg-white rounded",innerHTML:(R=r(d))==null?void 0:R.icon},null,8,Tt),t("div",jt,[t("div",null,[t("span",Ht,"#"+_((Y=r(d))==null?void 0:Y.genre),1)]),t("div",null,[$(_(r(a)("mehm.postedBy"))+" ",1),t("span",Vt,_((E=r(d))==null?void 0:E.authorName),1),zt,t("span",{title:(P=r(d))==null?void 0:P.createdDate},_((J=r(d))==null?void 0:J.timeAgo),9,Dt)])])]),t("h1",{contenteditable:A.value,class:"focus:bg-void-700",onInput:s[0]||(s[0]=H=>L(H,"title"))},_((G=r(d))==null?void 0:G.title),41,Nt),t("p",{class:"my-4 focus:bg-void-700",contenteditable:A.value,onInput:s[1]||(s[1]=H=>L(H,"description"))},_((K=r(d))==null?void 0:K.description),41,Rt),t("div",Yt,[t("button",{class:"icon-btn",onClick:c},[g.value?(l(),T(C,{key:0,class:"text-root-100"})):(l(),T(ce,{key:1})),$(_((O=r(d))==null?void 0:O.likes)+" "+_(r(a)("mehm.button.likes")),1)]),t("a",Et,[v(de),$(" "+_(r(a)("mehm.button.comments")),1)]),r(b)?(l(),u("button",{key:0,class:"icon-btn",onClick:p},[v(ue,{class:ae(["transition-colors duration-200",{"text-void-100":I.value}])},null,8,["class"]),$(" "+_(r(a)("mehm.button.share")),1)])):F("",!0),A.value?(l(),u("button",{key:1,class:"icon-btn",onClick:j},[v(_e),$(" "+_(r(a)("mehm.button.delete")),1)])):F("",!0)])])],16),[[X,!r(Z)]]),n.showFooter?Q((l(),T(he,{key:0,class:"container mx-auto"},null,512)),[[X,!r(Z)]]):F("",!0)],64)}}});var Jt=te(Pt,[["__scopeId","data-v-1882bbc3"]]);const Gt={props:{id:String},setup(n,{expose:o}){return o({frontmatter:{title:"Mehm",meta:[{property:"og:title",content:"Mehm"}]}}),Se({title:"Mehm",meta:[{property:"og:title",content:"Mehm"}]}),(M,S)=>{const f=Ie,x=Jt;return l(),u("div",null,[v(f,{"show-search":"","show-category":"","show-order":""}),v(x,{id:parseInt(n.id),"show-footer":"",class:"mt-4"},null,8,["id"])])}}};typeof ee=="function"&&ee(Gt);export{Gt as default};
