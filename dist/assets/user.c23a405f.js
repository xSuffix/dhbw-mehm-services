var k=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var _=(n,t,s)=>t in n?k(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,u=(n,t)=>{for(var s in t||(t={}))U.call(t,s)&&_(n,s,t[s]);if(g)for(var s of g(t))D.call(t,s)&&_(n,s,t[s]);return n},l=(n,t)=>C(n,F(t));import{e as N,f as A,h as B,q as S,r as j,s as I,g as y,o as m,c as p,a as o,x as a,t as i,y as T,G as V,u as E,k as M}from"./app.516df111.js";import{t as H}from"./jdenticon-module.687b0030.js";const L={class:"paper max-w-2xl mx-auto p-4 lg:p-8 rounded"},z=o("h1",{class:"text-center"}," My user profile ",-1),G=o("p",{class:"mb-12 text-center"}," Time to brush your eyes? No problem, we do forgive your sins, son. ",-1),J={class:"flex"},O={class:"flex gap-3 items-start"},R=["innerHTML"],W={class:"strong font-medium"},q={class:"flex gap-4 mt-2"},K={class:"text-root-100"},P=o("summary",{class:"select-none"}," Danger Zone ",-1),Y=o("div",{class:"my-4"},[o("p",{class:"text-xl strong"}," Warning! Deleting your user account can not be revoked! "),o("p",null,"This is not hiding from FBI but vanishing completely!")],-1),Z=N({setup(n){const t=`${V}/user`,s=A(),r=B(),f=H(r.name,48),h=S(()=>r.admin?"Admin":"User"),c=j("");r.jwt||s.push("/login");const{copy:v,isSupported:b}=I(),{execute:x}=y(`${t}/logout`,{immediate:!1,async beforeFetch({options:e}){return e.headers=l(u({},e.headers),{Credentials:"include",Authorization:`Bearer ${r.jwt}`}),{options:e}},afterFetch(e){const d=JSON.parse(e.data);return typeof document!="undefined"&&(document.cookie=`${d.Name}=${d.Value}; expires=${new Date(Date.now()-60*60*1e3)}; path=/`,r.logout()),s.push("/login"),e},onFetchError(e){return c.value=e.data.response,e}}).get(),w=()=>{x()},$=()=>{y(`${t}/delete`,{async beforeFetch({options:e}){return e.headers=l(u({},e.headers),{Credentials:"include",Authorization:`Bearer ${r.jwt}`}),e.body=JSON.stringify({id:`${r.id}`}),{options:e}},afterFetch(e){return typeof document!="undefined"&&(document.cookie=`${e.data.Name}=${e.data.Value}; expires=${new Date(Date.now()-60*60*1e3)}; path=/`),s.push("/"),s.forward(),e},onFetchError(e){return c.value=e.data.response,e}}).post().json()};return(e,d)=>(m(),p("div",L,[z,G,o("div",J,[o("div",O,[o("div",{class:"bg-white rounded",innerHTML:a(f)},null,8,R),o("div",null,[o("div",W," ["+i(a(h))+"] "+i(a(r).name),1),o("div",null,i(a(r).email),1)])])]),o("div",q,[o("button",{class:"bg-void-100 text-void-900 font-bold w-full p-2 mt-4 rounded",onClick:w}," Logout "),a(b)?(m(),p("button",{key:0,class:"bg-void-700 text-gray-200 font-bold w-full p-2 mt-4 rounded",onClick:d[0]||(d[0]=Q=>a(v)(a(r).jwt))}," Copy API Key ")):T("",!0)]),o("p",K,i(c.value),1),o("details",{class:"mt-8"},[P,Y,o("button",{class:"bg-root-100 text-root-900 font-bold w-full p-2 mt-4 rounded",onClick:$}," Delete ")])]))}}),oe={setup(n,{expose:t}){return t({frontmatter:{title:"User",meta:[{name:"User",content:"Info regarding your user"},{property:"og:title",content:"User"}]}}),E({title:"User",meta:[{name:"User",content:"Info regarding your user"},{property:"og:title",content:"User"}]}),(f,h)=>{const c=Z;return m(),p("div",null,[M(c)])}}};export{oe as default};
