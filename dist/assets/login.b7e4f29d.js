var S=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var _=(n,e,o)=>e in n?S(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,h=(n,e)=>{for(var o in e||(e={}))M.call(e,o)&&_(n,o,e[o]);if(p)for(var o of p(e))D.call(e,o)&&_(n,o,e[o]);return n},g=(n,e)=>C(n,F(e));import{e as K,f as N,r as m,g as U,h as V,i as E,o as w,c as x,a as s,w as f,v,j as y,t as $,k as b,l as j,b as k,G as q,u as A}from"./app.516df111.js";const B={class:"paper max-w-2xl mx-auto p-4 lg:p-8 rounded"},T=s("h1",{class:"text-center"}," Sign in to DHBW Mehms ",-1),G=s("p",{class:"mb-12 text-center"}," Upload your own Mehms, like and comment your fav Mehms! ",-1),H={class:"flex flex-col my-4"},I=s("label",{for:"login",class:"font-medium py-1 required"},"Username or Email Address",-1),J=["onKeyup"],O={class:"flex flex-col my-4"},R=s("label",{for:"password",class:"font-medium py-1 required"},"Password",-1),W=["onKeyup"],P={class:"text-root-100"},Y={class:"mt-6"},z=k(" Du hast noch kein Konto? Registriere dich "),Q=k(" hier "),X=K({setup(n){const e=N(),o=`${q}/user/login`,r=m(""),i=m(""),l=m(""),{execute:d}=U(o,{immediate:!1,async beforeFetch({options:t,cancel:a}){return(!r.value.trim().length||!i.value.trim().length)&&(l.value="Es wurden nicht alle Felder ausgef\xFClt",a()),t.headers=g(h({},t.headers),{Credentials:"include"}),t.body=JSON.stringify({id:r.value,password:i.value}),{options:t}},afterFetch(t){if(typeof document!="undefined"){const a={id:t.data.id,name:t.data.username,email:t.data.email,admin:t.data.Admin};document.cookie=`${t.data.jwt.Name}=${t.data.jwt.Value}; expires=${new Date(Date.now()+2*60*60*1e3).toUTCString()}; path=/`,localStorage.setItem("user",JSON.stringify(a)),V().login(a),window.history.state.back?e.back():e.push("/")}return t},onFetchError(t){return l.value=t.data.message,t}}).post().json(),u=()=>{d()};return(t,a)=>{const L=E("router-link");return w(),x("div",B,[T,G,s("div",null,[s("div",H,[I,f(s("input",{id:"login","onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c),type:"text",name:"login",tabindex:"1",class:"box",required:"true",onKeyup:y(u,["enter"])},null,40,J),[[v,r.value]])]),s("div",O,[R,f(s("input",{id:"password","onUpdate:modelValue":a[1]||(a[1]=c=>i.value=c),type:"password",name:"password",tabindex:"2",class:"box",required:"true",onKeyup:y(u,["enter"])},null,40,W),[[v,i.value]])]),s("p",P,$(l.value),1),s("button",{class:"bg-void-100 text-void-900 font-bold w-full p-2 mt-4 rounded",tabindex:"3",onClick:u}," Sign In "),s("p",Y,[z,b(L,{to:"/register",class:"strong underline",tabindex:"4"},{default:j(()=>[Q]),_:1})])])])}}}),te={setup(n,{expose:e}){return e({frontmatter:{title:"Login",meta:[{name:"Login",content:"Log in to post Mehms, like and comment"},{property:"og:title",content:"Login"}]}}),A({title:"Login",meta:[{name:"Login",content:"Log in to post Mehms, like and comment"},{property:"og:title",content:"Login"}]}),(i,l)=>{const d=X;return w(),x("div",null,[b(d)])}}};export{te as default};
